<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.1/dist/js.cookie.min.js"></script>
<style>
body {
	font-size: 15px;
}
</style>
</head>
<body>
<button onclick="login()">
Login with app
</button>
<button onclick="logout()">
Logout
</button>
<br/>
<div id="message"></div>

<script>
	function checkLogin() {
		const username = Cookies.get('username')
		if (username) {
			document.getElementById('message').innerHTML = 'Logged in with username ' + username;
			return true;
		}
		document.getElementById('message').innerHTML = '';
		return false;
	}

	function login() {
		window.location.replace('dlt://login');
		const interval = setInterval(() => {
			const result = checkLogin();
			if (result) {
				clearInterval(interval);
			}
		}, 1000);
	}

	function logout() {
		Cookies.remove('username');
		checkLogin();
	}

	checkLogin();
</script>
</body>
</html>
